function wdgInitSortable(t){t(".wp_pg_mb").sortable()}function wdgInitPhotos(t){t(".wp_pg_add").click(function(t){t.preventDefault(),media_upload()})}function wdgInitRemove(t){t(".wp_pg_remove").unbind("click"),t(".wp_pg_remove").click(function(e){e.preventDefault(),t(this).parent(".wp_pg_photo").slideUp(300,function(){t(this).remove()})})}function media_upload(){var t;return t?void t.open():(t=wp.media.frames.tgm_media_frame=wp.media({className:"media-frame tgm-media-frame",frame:"select",multiple:!0,title:"Insert Photos",library:{type:"image"},button:{text:"Insert into Gallery"}}),t.on("select",function(){var e=t.state().get("selection").toJSON();console.log(e),jQuery.each(e,function(t,e){var p=newPhotoTemplate(e.id,e.title,e.caption,e.alt,e.url);jQuery(".wp_pg_mb").append(p)}),wdgInitRemove(jQuery)}),void t.open())}function newPhotoTemplate(t,e,p,o,i){var n='<div class="wp_pg_photo"> \t<div class="wp_pg_img"><img src="'+i+'"></div>\t<div class="wp_pg_details">\t\t<label for="wp_pg_title_'+t+'">Title</label>\t\t<input type="text" id="wp_pg_title_'+t+'" name="wp_pg_title[]" value="'+e+'">\t\t<label for="wp_pg_caption'+t+'">Caption</label>\t\t<input type="text" id="wp_pg_caption'+t+'" name="wp_pg_caption[]" value="'+p+'">\t\t<label for="wp_pg_alt'+t+'">Alt Text</label>\t\t<input type="text" id="wp_pg_alt'+t+'" name="wp_pg_alt[]" value="'+o+'">\t</div>\t<input type="hidden" name="wp_pg_photo[]" value="'+t+'">\t<a href="#" class="button wp_pg_remove">Remove Photo</a></div>';return n}function wpPhotoGalleryInsertForm(t){t>0?window.send_to_editor("[wp_pg ID="+t+"]"):window.send_to_editor("[wp_pg]")}jQuery(document).ready(function(t){wdgInitSortable(t),wdgInitPhotos(t),wdgInitRemove(t)});